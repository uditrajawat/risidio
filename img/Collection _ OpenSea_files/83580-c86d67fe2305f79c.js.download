"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[83580],{67104:function(e,n,l){l.d(n,{P:function(){return g}});var a=l(19989),t=l(76449),i=l(47892),r=l(53585),o=l(72363),u=l(90761);function s(){var e=(0,a.Z)(["\n          background-color: ",";\n        "]);return s=function(){return e},e}function c(){var e=(0,a.Z)(["\n      animation: pulse 3s ease infinite;\n      @keyframes pulse {\n        0% {\n          box-shadow: 0 0 0 0 ",";\n        }\n        70% {\n          box-shadow: 0 0 0 7px ",";\n        }\n        100% {\n          box-shadow: 0 0 0 0 ",";\n        }\n      }\n    "]);return c=function(){return e},e}function d(){var e=(0,a.Z)(["\n      margin-right: 12px;\n      width: 12px;\n      height: 12px;\n    "]);return d=function(){return e},e}function m(){var e=(0,a.Z)(["\n  width: 10px;\n  height: 10px;\n  flex-shrink: 0;\n  border-radius: 50%;\n  margin-right: 12px;\n  ",";\n\n  ","\n\n  ","\n"]);return m=function(){return e},e}var g=(0,i.ZP)(r.g).withConfig({componentId:"sc-af46d368-0"})(m(),(function(e){var n=e.$isActive,l=e.theme;return n?(0,i.iv)(s(),l.colors.seaGrass):(0,u.Um)({variants:{dark:{backgroundColor:l.colors.white},light:{backgroundColor:l.colors.white}}})}),(function(e){return e.$isActive&&(0,i.iv)(c(),(0,t.m4)(e.theme.colors.seaGrass,1),(0,t.m4)(e.theme.colors.seaGrass,0),(0,t.m4)(e.theme.colors.seaGrass,0))}),(0,o.BC)({lg:(0,i.iv)(d())}))},49507:function(e,n,l){l.d(n,{bX:function(){return h},M:function(){return C},SK:function(){return D},jv:function(){return S}});var a=l(23842),t=l(85034),i=l(31373),r=l(52050),o=l(59312),u=l(24246),s=l(27378),c=l(57759),d=l(26992),m=l(39937),g=l(4402),p=l(24140),y=l(38709),T=l(94762),v=l(40306),f=(l(2417),l(47748)),k=(l(59809),l(89154)),D=function(e){var n=e.endTime;if(!n)return!1;var l=Date.now(),a=(0,c.Z)(n);return(0,d.Z)(l,a)||(0,m.Z)(l,a)},S=function(e){var n=e.startTime,l=e.endTime,a=Date.now(),t=(0,c.Z)(n);return((0,d.Z)(a,t)||(0,m.Z)(t,a))&&!D({endTime:l})},b={collectionSlug:"",mintedItemCount:0,totalItemCount:1,ctaStageIsActive:!1,ctaStageIsPast:!1,isStageActive:S,isPastStage:D,refetchCtaStageState:(0,a.Z)((function(){return(0,o.__generator)(this,(function(e){switch(e.label){case 0:return[4,void 0];case 1:return[2,e.sent()]}}))})),quantityToMint:1,mintedOut:!1,setQuantityToMint:function(){return!1},editMode:!1},h=(0,s.createContext)(b),C=function(e){var n,a,o,m,C,K,F,I,P,L=e.children,Z=e.collectionSlug,M=e.dataKey,x=e.editMode,E=(0,g.useFragment)(l(18170),M),w=(0,s.useState)(null!==(I=null===E||void 0===E||null===(n=E.drop)||void 0===n||null===(a=n.chainData)||void 0===a?void 0:a.mintedItemCount)&&void 0!==I?I:b.mintedItemCount),A=w[0],Q=w[1],U=(0,s.useState)(b.quantityToMint),N=U[0],q=U[1],O=function(e){var n,a,t,i,o=(0,r.Z)((0,f.i)(l(56671),{collection:e}),2),u=o[0],d=o[1],m=null===u||void 0===u||null===(n=u.collection)||void 0===n||null===(a=n.drop)||void 0===a?void 0:a.ctaStage,g=(0,s.useState)(!1),p=g[0],y=g[1],T=(0,s.useState)(!1),v=T[0],b=T[1],h=(0,s.useCallback)((function(){if(null===m||void 0===m?void 0:m.relayId){var e=S({startTime:m.startTime,endTime:m.endTime}),n=D({endTime:m.endTime});return y(e),b(n),{isActive:e,isPast:n}}return{isActive:!1,isPast:!1}}),[m]);return(0,s.useEffect)((function(){h();var e=null,n=null;if(!v&&m){if(!p){var l=(0,c.Z)(m.startTime),a=(0,k.Z)(l,Date.now());e=setTimeout((function(){h()}),a)}if(m.endTime&&"PUBLIC"===m.stageType){var t=(0,c.Z)(m.endTime),i=(0,k.Z)(t,Date.now());n=setTimeout((function(){h()}),i)}}return function(){e&&clearTimeout(e),n&&clearTimeout(n)}}),[m,p,v,h]),{isStageActive:S,isPastStage:D,ctaStageIsActive:p,ctaStageIsPast:v,refetchCtaStageState:d,availableMints:null!==(i=null===m||void 0===m||null===(t=m.contextUserData)||void 0===t?void 0:t.availableMints)&&void 0!==i?i:0}}(Z),_=O.ctaStageIsActive,V=(0,i.Z)(O,["ctaStageIsActive"]),G=null!==(P=null===E||void 0===E||null===(o=E.drop)||void 0===o||null===(m=o.chainData)||void 0===m?void 0:m.totalItemCount)&&void 0!==P?P:1,$=A===G,j=(0,r.Z)((0,f.i)(l(81802),{collection:Z},{skip:$||x}),2),R=j[0],W=j[1];return(0,s.useEffect)((function(){var e,n,l,a,t=null!==(a=null===R||void 0===R||null===(e=R.collection)||void 0===e||null===(n=e.drop)||void 0===n||null===(l=n.chainData)||void 0===l?void 0:l.mintedItemCount)&&void 0!==a?a:0;A!==t&&t>A&&Q(t)}),[null===R||void 0===R||null===(C=R.collection)||void 0===C||null===(K=C.drop)||void 0===K||null===(F=K.chainData)||void 0===F?void 0:F.mintedItemCount]),(0,p.Z)((function(){_&&!$&&W({collection:Z})}),3e3),function(e){var n,a,t=e.collectionSlug,i=e.editMode,o=(0,r.Z)((0,f.i)(l(17017),{collection:t},{skip:!t||i}),2),u=o[0],s=o[1],m=null===u||void 0===u||null===(n=u.collection)||void 0===n||null===(a=n.drop)||void 0===a?void 0:a.ctaStage,g=(null===m||void 0===m?void 0:m.endTime)?(0,c.Z)(m.endTime):null;(0,p.Z)((function(){var e=Date.now();g&&(0,d.Z)(e,(0,y.Z)(g,{seconds:2.75}))&&(0,T.Z)(e,(0,v.Z)(g,{seconds:5}))&&s({collection:t},{force:!0})}),750),m&&(m.label,m.perWalletLimit,m.stageType,m.startTime,m.endTime,m.contextUserData.isEligible,m.contextUserData.availableMints)}({collectionSlug:Z,editMode:x}),(0,u.jsx)(h.Provider,{value:(0,t.Z)({collectionSlug:Z,mintedItemCount:A,totalItemCount:G,ctaStageIsActive:_,quantityToMint:N,setQuantityToMint:q,mintedOut:$,editMode:!!x},V),children:L})}},58993:function(e,n,l){l.d(n,{Aw:function(){return s},GH:function(){return u},iL:function(){return o}});var a=l(26992),t=l(57759),i=l(4402),r=(l(2417),l(49507)),o={ACTIVE:"ACTIVE",UPCOMING:"UPCOMING",ENDED:"ENDED",MINTED_OUT:"MINTED_OUT"},u=function(e){var n=e.mintedItemCount,l=e.totalItemCount,i=e.stages,u=n===l,s=i[0],c=i[i.length-1],d=new Date,m=c.endTime&&(0,a.Z)(d,(0,t.Z)(c.endTime)),g=(0,r.jv)({startTime:s.startTime,endTime:null});return u?o.MINTED_OUT:m?o.ENDED:g?o.ACTIVE:o.UPCOMING},s=function(e){var n=(0,i.useFragment)(l(48330),e);return(null===n||void 0===n?void 0:n.stages)&&(null===n||void 0===n?void 0:n.chainData)?u({stages:n.stages.map((function(e){return{startTime:e.startTime,endTime:e.endTime}})),mintedItemCount:n.chainData.mintedItemCount,totalItemCount:n.chainData.totalItemCount}):null}},81802:function(e,n,l){l.r(n);var a=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"collection"}],n=[{kind:"Variable",name:"collection",variableName:"collection"}],l={alias:null,args:null,concreteType:"DropChainDataType",kind:"LinkedField",name:"chainData",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"mintedItemCount",storageKey:null}],storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"PrimaryDropProviderMintProgressQuery",selections:[{alias:null,args:n,concreteType:"CollectionType",kind:"LinkedField",name:"collection",plural:!1,selections:[{alias:null,args:null,concreteType:"DropType",kind:"LinkedField",name:"drop",plural:!1,selections:[l],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"PrimaryDropProviderMintProgressQuery",selections:[{alias:null,args:n,concreteType:"CollectionType",kind:"LinkedField",name:"collection",plural:!1,selections:[{alias:null,args:null,concreteType:"DropType",kind:"LinkedField",name:"drop",plural:!1,selections:[l,a],storageKey:null},a],storageKey:null}]},params:{cacheID:"a898fed57b40e506bd270d6234b6aae5",id:null,metadata:{},name:"PrimaryDropProviderMintProgressQuery",operationKind:"query",text:"query PrimaryDropProviderMintProgressQuery(\n  $collection: CollectionSlug!\n) {\n  collection(collection: $collection) {\n    drop {\n      chainData {\n        mintedItemCount\n      }\n      id\n    }\n    id\n  }\n}\n"}}}();a.hash="075fb10c556e0589574bc834c0bc8b8f",n.default=a},18170:function(e,n,l){l.r(n);var a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"PrimaryDropProviderMintProgress_data",selections:[{alias:null,args:null,concreteType:"DropType",kind:"LinkedField",name:"drop",plural:!1,selections:[{alias:null,args:null,concreteType:"DropChainDataType",kind:"LinkedField",name:"chainData",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"mintedItemCount",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"totalItemCount",storageKey:null}],storageKey:null}],storageKey:null}],type:"CollectionType",abstractKey:null,hash:"da186afd406c01965a8788d609947cbb"};n.default=a},56671:function(e,n,l){l.r(n);var a=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"collection"}],n=[{kind:"Variable",name:"collection",variableName:"collection"}],l={alias:null,args:null,kind:"ScalarField",name:"relayId",storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"startTime",storageKey:null},t={alias:null,args:null,kind:"ScalarField",name:"endTime",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"stageType",storageKey:null},r={alias:null,args:null,concreteType:"ContextUserDataType",kind:"LinkedField",name:"contextUserData",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"availableMints",storageKey:null}],storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"useCtaStageStateQuery",selections:[{alias:null,args:n,concreteType:"CollectionType",kind:"LinkedField",name:"collection",plural:!1,selections:[{alias:null,args:null,concreteType:"DropType",kind:"LinkedField",name:"drop",plural:!1,selections:[{alias:null,args:null,concreteType:"DropStageType",kind:"LinkedField",name:"ctaStage",plural:!1,selections:[l,a,t,i,r],storageKey:null}],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"useCtaStageStateQuery",selections:[{alias:null,args:n,concreteType:"CollectionType",kind:"LinkedField",name:"collection",plural:!1,selections:[{alias:null,args:null,concreteType:"DropType",kind:"LinkedField",name:"drop",plural:!1,selections:[{alias:null,args:null,concreteType:"DropStageType",kind:"LinkedField",name:"ctaStage",plural:!1,selections:[l,a,t,i,r,o],storageKey:null},o],storageKey:null},o],storageKey:null}]},params:{cacheID:"bf8b2572ecaf77201e90d0d8e76079f5",id:null,metadata:{},name:"useCtaStageStateQuery",operationKind:"query",text:"query useCtaStageStateQuery(\n  $collection: CollectionSlug!\n) {\n  collection(collection: $collection) {\n    drop {\n      ctaStage {\n        relayId\n        startTime\n        endTime\n        stageType\n        contextUserData {\n          availableMints\n        }\n        id\n      }\n      id\n    }\n    id\n  }\n}\n"}}}();a.hash="63d7f96eb88de34e31ed02d5ed874b7f",n.default=a},48330:function(e,n,l){l.r(n);var a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useDropState_data",selections:[{alias:null,args:null,concreteType:"DropStageType",kind:"LinkedField",name:"stages",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"startTime",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"endTime",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"DropChainDataType",kind:"LinkedField",name:"chainData",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"mintedItemCount",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"totalItemCount",storageKey:null}],storageKey:null}],type:"DropType",abstractKey:null,hash:"7822bcb1227f39b88a8320131f5d3e49"};n.default=a},17017:function(e,n,l){l.r(n);var a=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"collection"}],n=[{kind:"Variable",name:"collection",variableName:"collection"}],l={alias:null,args:null,kind:"ScalarField",name:"label",storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"startTime",storageKey:null},t={alias:null,args:null,kind:"ScalarField",name:"endTime",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"perWalletLimit",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"stageType",storageKey:null},o={alias:null,args:null,concreteType:"ContextUserDataType",kind:"LinkedField",name:"contextUserData",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"isEligible",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"availableMints",storageKey:null}],storageKey:null},u={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"usePolledDropDataQuery",selections:[{alias:null,args:n,concreteType:"CollectionType",kind:"LinkedField",name:"collection",plural:!1,selections:[{alias:null,args:null,concreteType:"DropType",kind:"LinkedField",name:"drop",plural:!1,selections:[{alias:null,args:null,concreteType:"DropStageType",kind:"LinkedField",name:"ctaStage",plural:!1,selections:[l,a,t,i,r,o],storageKey:null}],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"usePolledDropDataQuery",selections:[{alias:null,args:n,concreteType:"CollectionType",kind:"LinkedField",name:"collection",plural:!1,selections:[{alias:null,args:null,concreteType:"DropType",kind:"LinkedField",name:"drop",plural:!1,selections:[{alias:null,args:null,concreteType:"DropStageType",kind:"LinkedField",name:"ctaStage",plural:!1,selections:[l,a,t,i,r,o,u],storageKey:null},u],storageKey:null},u],storageKey:null}]},params:{cacheID:"2f237e7e64cbb180d095c415efbc4452",id:null,metadata:{},name:"usePolledDropDataQuery",operationKind:"query",text:"query usePolledDropDataQuery(\n  $collection: CollectionSlug\n) {\n  collection(collection: $collection) {\n    drop {\n      ctaStage {\n        label\n        startTime\n        endTime\n        perWalletLimit\n        stageType\n        contextUserData {\n          isEligible\n          availableMints\n        }\n        id\n      }\n      id\n    }\n    id\n  }\n}\n"}}}();a.hash="f762efb2271872d4eacb0f91c2bb823f",n.default=a}}]);
//# sourceMappingURL=83580-c86d67fe2305f79c.js.map